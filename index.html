<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ğŸ‘‘ Ø³Ù„Ø·Ø§Ù† Ø§Ù„Ù„ÙˆØ¬ÙŠØ³ØªÙŠÙƒ - Ù„Ø¹Ø¨Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø´ÙŠØ·Ø§Ù†ÙŠØ©</title>
<style>
  body {
    background: #111;
    color: #eee;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    direction: rtl;
    padding: 20px;
    max-width: 700px;
    margin: auto;
  }
  h1 {
    color: #00ffe1;
    text-align: center;
    margin-bottom: 20px;
  }
  .status-bar {
    font-size: 14px;
    color: #aaa;
    margin-bottom: 10px;
    display: flex;
    justify-content: space-between;
  }
  .client {
    background: #222;
    padding: 15px;
    margin-bottom: 15px;
    border-radius: 10px;
    box-shadow: 0 0 12px crimson;
  }
  .client h2 {
    margin-top: 0;
    color: #ff4c4c;
  }
  .stock-bar {
    background: #444;
    border-radius: 10px;
    overflow: hidden;
    margin: 8px 0 10px 0;
  }
  .stock-fill {
    height: 20px;
    background: #00ffe1;
    width: 0%;
    transition: width 0.5s ease;
  }
  button {
    background: #333;
    color: #eee;
    border: none;
    border-radius: 8px;
    padding: 10px 15px;
    margin-top: 10px;
    cursor: pointer;
    font-weight: bold;
    width: 100%;
    transition: background 0.3s ease;
  }
  button:hover {
    background: #555;
  }
  #events {
    background: #222;
    border-radius: 12px;
    padding: 10px;
    max-height: 120px;
    overflow-y: auto;
    margin-bottom: 20px;
    font-size: 14px;
  }
  #feedback {
    margin-top: 10px;
    font-weight: bold;
    text-align: center;
    font-size: 18px;
  }
</style>
</head>
<body>

<h1>ğŸ‘‘ Ø³Ù„Ø·Ø§Ù† Ø§Ù„Ù„ÙˆØ¬ÙŠØ³ØªÙŠÙƒ - Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø´ÙŠØ·Ø§Ù†ÙŠØ©</h1>
<div class="status-bar">
  <div>â±ï¸ Ø§Ù„ÙˆÙ‚Øª: <span id="time">0</span> Ø«Ø§Ù†ÙŠØ©</div>
  <div>ğŸ’  Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="score">0</span></div>
</div>

<div id="clients-container"></div>

<div id="events"></div>

<div id="feedback"></div>

<script>
(() => {
  // --- Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ ÙˆØ§Ù„Ù…Ø®Ø§Ø²Ù† ---
  const clients = [
    {
      id: 1,
      name: "Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ø£Ø­Ù…Ø±",
      stock: 100,
      maxStock: 200,
      dailyDemandRange: [15, 30],
      reorderPoint: 50,
      reorderAmount: 100,
    },
    {
      id: 2,
      name: "Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ø£Ø²Ø±Ù‚",
      stock: 150,
      maxStock: 300,
      dailyDemandRange: [20, 40],
      reorderPoint: 80,
      reorderAmount: 120,
    },
    {
      id: 3,
      name: "Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø§Ù„Ø£Ø®Ø¶Ø±",
      stock: 80,
      maxStock: 150,
      dailyDemandRange: [10, 25],
      reorderPoint: 40,
      reorderAmount: 90,
    },
  ];

  let score = 0;
  let timeElapsed = 0;
  let day = 1;
  const totalDays = 7;

  const timeElem = document.getElementById("time");
  const scoreElem = document.getElementById("score");
  const clientsContainer = document.getElementById("clients-container");
  const eventsElem = document.getElementById("events");
  const feedbackElem = document.getElementById("feedback");

  // Ø¥Ù†Ø´Ø§Ø¡ ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„
  function createClientUI(client) {
    const div = document.createElement("div");
    div.className = "client";
    div.id = `client-${client.id}`;

    div.innerHTML = `
      <h2>${client.name}</h2>
      <div>Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø§Ù„Ø­Ø§Ù„ÙŠ: <span class="stock-value">${client.stock}</span> / ${client.maxStock}</div>
      <div class="stock-bar"><div class="stock-fill" style="width: ${Math.min(100, (client.stock / client.maxStock) * 100)}%"></div></div>
      <button onclick="reorder(${client.id})">Ø·Ù„Ø¨ Ø¥Ø¹Ø§Ø¯Ø© ØªÙˆØ±ÙŠØ¯ (${client.reorderAmount} ÙˆØ­Ø¯Ø©)</button>
    `;

    return div;
  }

  // Ø¹Ø±Ø¶ ÙƒÙ„ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
  function displayClients() {
    clientsContainer.innerHTML = "";
    clients.forEach(client => {
      clientsContainer.appendChild(createClientUI(client));
    });
  }

  // ØªØ­Ø¯ÙŠØ« ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„
  function updateClientUI(client) {
    const clientDiv = document.getElementById(`client-${client.id}`);
    if (!clientDiv) return;
    clientDiv.querySelector(".stock-value").textContent = client.stock;
    const fillPercent = Math.min(100, (client.stock / client.maxStock) * 100);
    clientDiv.querySelector(".stock-fill").style.width = fillPercent + "%";
  }

  // Ø¥Ø¶Ø§ÙØ© Ø­Ø¯Ø« ÙÙŠ ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
  function addEvent(text) {
    const p = document.createElement("p");
    p.textContent = `ğŸ“¢ ${text}`;
    eventsElem.prepend(p);
    if (eventsElem.childElementCount > 5) {
      eventsElem.removeChild(eventsElem.lastChild);
    }
  }

  // Ø·Ù„Ø¨ Ø¥Ø¹Ø§Ø¯Ø© ØªÙˆØ±ÙŠØ¯
  window.reorder = function(clientId) {
    const client = clients.find(c => c.id === clientId);
    if (!client) return;
    if (client.stock + client.reorderAmount > client.maxStock) {
      feedbackElem.textContent = `âš ï¸ Ù„Ø§ ÙŠÙ…ÙƒÙ†Ùƒ Ø²ÙŠØ§Ø¯Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ† ÙÙˆÙ‚ Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ Ù„Ù„Ø¹Ù…ÙŠÙ„ ${client.name}`;
      return;
    }
    client.stock += client.reorderAmount;
    score += 5;
    updateClientUI(client);
    feedbackElem.textContent = `âœ”ï¸ Ø·Ù„Ø¨ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„ØªÙˆØ±ÙŠØ¯ Ù„Ù„Ø¹Ù…ÙŠÙ„ ${client.name} ØªÙ…Øª Ø¨Ù†Ø¬Ø§Ø­! +5 Ù†Ù‚Ø§Ø·`;
    scoreElem.textContent = score;
    addEvent(`ØªÙ… Ø·Ù„Ø¨ ØªÙˆØ±ÙŠØ¯ ${client.reorderAmount} ÙˆØ­Ø¯Ø© Ù„Ù„Ø¹Ù…ÙŠÙ„ ${client.name}`);
  };

  // ØªÙ†ÙÙŠØ° ÙŠÙˆÙ… Ø¬Ø¯ÙŠØ¯: Ø®ØµÙ… Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„ÙŠÙˆÙ…ÙŠ Ø§Ù„Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ù…Ù† ÙƒÙ„ Ø¹Ù…ÙŠÙ„
  function nextDay() {
    if (day > totalDays) {
      endGame();
      return;
    }
    feedbackElem.textContent = "";
    addEvent(`-- Ø¨Ø¯Ø¡ Ø§Ù„ÙŠÙˆÙ… ${day} --`);

    clients.forEach(client => {
      const demand = randomInt(client.dailyDemandRange[0], client.dailyDemandRange[1]);
      client.stock -= demand;
      addEvent(`Ø§Ù„Ø¹Ù…ÙŠÙ„ ${client.name} Ø·Ù„Ø¨ ${demand} ÙˆØ­Ø¯Ø©.`);
      if (client.stock < 0) {
        client.stock = 0;
      }
      updateClientUI(client);
    });

    // ØªØ­Ù‚Ù‚ Ø®Ø³Ø§Ø±Ø© Ø¥Ø°Ø§ Ù†ÙØ¯ Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø¹Ù†Ø¯ Ø£ÙŠ Ø¹Ù…ÙŠÙ„
    const outOfStockClients = clients.filter(c => c.stock === 0);
    if (outOfStockClients.length > 0) {
      feedbackElem.textContent = `âŒ Ø®Ø³Ø±Øª! Ù†ÙØ¯ Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ù„Ø¯Ù‰ ${outOfStockClients.map(c => c.name).join(", ")} ÙÙŠ Ø§Ù„ÙŠÙˆÙ… ${day}`;
      clearInterval(gameTimer);
      disableReorderButtons();
      return;
    }

    day++;
  }

  // ØªØ¹Ø·ÙŠÙ„ Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø·Ù„Ø¨ Ø¹Ù†Ø¯ Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
  function disableReorderButtons() {
    clients.forEach(client => {
      const btn = document.querySelector(`#client-${client.id} button`);
      if (btn) btn.disabled = true;
    });
  }

  // Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© (ÙÙˆØ²)
  function endGame() {
    clearInterval(gameTimer);
    disableReorderButtons();
    feedbackElem.textContent = `ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ! Ø£ÙƒÙ…Ù„Øª ${totalDays} Ø£ÙŠØ§Ù… Ù…Ù† Ø§Ù„Ø³ÙŠØ·Ø±Ø© Ø¹Ù„Ù‰ Ø§Ù„Ù„ÙˆØ¬ÙŠØ³ØªÙŠÙƒ Ø¨Ù†Ø¬Ø§Ø­. Ù†Ù‚Ø§Ø·Ùƒ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©: ${score}`;
    addEvent("ğŸ† Ø§Ù„Ù„Ø¹Ø¨Ø© Ø§Ù†ØªÙ‡Øª Ø¨Ù†Ø¬Ø§Ø­!");
  }

  // ØªÙˆÙ„ÙŠØ¯ Ø±Ù‚Ù… Ø¹Ø´ÙˆØ§Ø¦ÙŠ Ø¨ÙŠÙ† min Ùˆ max
  function randomInt(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
  }

  // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆÙ‚Øª ÙˆØ§Ù„Ù†Ù‚Ø§Ø·
  function updateStatus() {
    timeElapsed++;
    timeElem.textContent = timeElapsed;
    scoreElem.textContent = score;
  }

  displayClients();

  // Ø¨Ø¯Ø¡ Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ Ù„Ù„ÙŠÙˆÙ… Ø§Ù„Ø¬Ø¯ÙŠØ¯ ÙƒÙ„ 15 Ø«Ø§Ù†ÙŠØ© (ÙŠÙ…ÙƒÙ† ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ø¯Ø© Ø­Ø³Ø¨ Ø±ØºØ¨ØªÙƒ)
  const gameTimer = setInterval(() => {
    nextDay();
    updateStatus();
  }, 15000);

  // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆÙ‚Øª ÙƒÙ„ Ø«Ø§Ù†ÙŠØ©
  setInterval(() => {
    timeElapsed++;
    timeElem.textContent = timeElapsed;
  }, 1000);

})();
</script>

</body>
</html>
