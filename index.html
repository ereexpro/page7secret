<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© Ø§Ù„Ù„ÙˆØ¬Ø³ØªÙŠÙƒ: Ø§Ù„Ø¯Ù… ÙˆØ§Ù„ØµÙÙ‚Ø§Øª</title>
<style>
  /* Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª */
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #0f0f0f;
    color: #eee;
    direction: rtl;
  }
  header {
    background: #1a1a1a;
    padding: 20px;
    font-size: 2.5em;
    text-align: center;
    color: crimson;
    border-bottom: 3px solid crimson;
    font-weight: bold;
    letter-spacing: 2px;
  }
  nav {
    display: flex;
    justify-content: space-around;
    background: #111;
    border-bottom: 1px solid #333;
  }
  nav button {
    background: none;
    border: none;
    padding: 15px 25px;
    color: #eee;
    font-size: 1.1em;
    cursor: pointer;
    transition: border-bottom 0.3s;
    font-weight: bold;
  }
  nav button.active {
    border-bottom: 3px solid crimson;
  }
  .screen {
    display: none;
    padding: 20px;
    max-width: 960px;
    margin: auto;
  }
  .screen.active {
    display: block;
  }
  h2 {
    border-bottom: 1px solid crimson;
    padding-bottom: 6px;
  }
  .card {
    background: #1a1a1a;
    margin: 15px 0;
    padding: 15px;
    border-radius: 8px;
    border: 1px solid #333;
  }
  button.action-btn {
    background: crimson;
    border: none;
    color: white;
    padding: 8px 14px;
    border-radius: 5px;
    cursor: pointer;
    font-weight: bold;
    margin-top: 10px;
    transition: background 0.3s;
  }
  button.action-btn:hover {
    background: #b20000;
  }
  select, input[type=number] {
    padding: 5px;
    margin-left: 10px;
    border-radius: 5px;
    border: none;
    font-size: 1em;
  }
  .status-bar {
    margin-top: 15px;
    background: #222;
    padding: 10px;
    border-right: 5px solid crimson;
  }
  .log {
    background: #111;
    margin: 15px 0;
    padding: 10px;
    height: 150px;
    overflow-y: auto;
    font-family: monospace;
    border: 1px solid #333;
    border-radius: 6px;
    text-align: left;
    direction: ltr;
  }
  .progress-bar {
    height: 20px;
    background: #444;
    border-radius: 10px;
    overflow: hidden;
    margin: 10px 0;
  }
  .progress-fill {
    height: 100%;
    background: crimson;
    width: 0%;
    transition: width 0.5s;
  }
  .disabled {
    opacity: 0.5;
    pointer-events: none;
  }
</style>
</head>
<body>
<header>ğŸ”¥ Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© Ø§Ù„Ù„ÙˆØ¬Ø³ØªÙŠÙƒ: Ø§Ù„Ø¯Ù… ÙˆØ§Ù„ØµÙÙ‚Ø§Øª ğŸ”¥</header>
<nav>
  <button class="active" onclick="switchScreen('market')">ğŸ’° Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø³ÙˆØ¯Ø§Ø¡</button>
  <button onclick="switchScreen('clients')">ğŸ¤ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡</button>
  <button onclick="switchScreen('police')">ğŸš¨ Ø§Ù„Ø´Ø±Ø·Ø©</button>
  <button onclick="switchScreen('reputation')">ğŸ“Š Ø§Ù„Ø³Ù…Ø¹Ø©</button>
  <button onclick="switchScreen('logistics')">ğŸšš Ø§Ù„Ù„ÙˆØ¬Ø³ØªÙŠÙƒ ÙˆØ§Ù„Ø´Ø­Ù†</button>
  <button onclick="switchScreen('events')">ğŸ”¥ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«</button>
  <button onclick="switchScreen('loans')">ğŸ’µ Ø§Ù„Ù‚Ø±ÙˆØ¶ ÙˆØ§Ù„ØªÙ…ÙˆÙŠÙ„</button>
  <button onclick="switchScreen('achievements')">ğŸ† Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª ÙˆØ§Ù„Ø£Ù‡Ø¯Ø§Ù</button>
</nav>

<div id="market" class="screen active">
  <h2>Ø§Ù„Ù…ÙˆØ±Ø¯ÙˆÙ† ÙÙŠ Ø§Ù„Ø³ÙˆÙ‚ Ø§Ù„Ø³ÙˆØ¯Ø§Ø¡</h2>
  <div id="supplier-list"></div>
</div>

<div id="clients" class="screen">
  <h2>Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø§Ù„Ù…Ø­ØªÙ…Ù„ÙˆÙ†</h2>
  <div id="client-list"></div>
</div>

<div id="police" class="screen">
  <h2>Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø´Ø±Ø·Ø©</h2>
  <div id="police-info"></div>
  <button class="action-btn" onclick="payBribe()">Ø¯ÙØ¹ Ø±Ø´ÙˆØ© (2000 Ø¯Ø±Ù‡Ù…)</button>
</div>

<div id="reputation" class="screen">
  <h2>Ù†Ø¸Ø§Ù… Ø§Ù„Ø³Ù…Ø¹Ø©</h2>
  <div id="reputation-info"></div>
</div>

<div id="logistics" class="screen">
  <h2>Ø§Ù„Ù„ÙˆØ¬Ø³ØªÙŠÙƒ ÙˆØ§Ù„Ø´Ø­Ù†</h2>
  <div class="card">
    <p>Ø§Ø®ØªØ± Ø§Ù„Ù…Ø³Ø§Ø±:
      <select id="route-select">
        <option value="safe">Ù…Ø³Ø§Ø± Ø¢Ù…Ù† (Ø¨Ø·ÙŠØ¡)</option>
        <option value="risky">Ù…Ø³Ø§Ø± Ù…Ø­ÙÙˆÙ Ø¨Ø§Ù„Ù…Ø®Ø§Ø·Ø± (Ø³Ø±ÙŠØ¹)</option>
      </select>
    </p>
    <p>Ø§Ø®ØªØ± Ø§Ù„Ù…Ø±ÙƒØ¨Ø©:
      <select id="vehicle-select">
        <option value="van">ÙØ§Ù†</option>
        <option value="armored">Ø´Ø§Ø­Ù†Ø© Ù…Ø¯Ø±Ø¹Ø©</option>
      </select>
    </p>
    <p>Ø§Ø®ØªØ± Ø§Ù„ØªØ®Ø²ÙŠÙ†:
      <select id="storage-select">
        <option value="internal">Ù…Ø³ØªÙˆØ¯Ø¹ Ø¯Ø§Ø®Ù„ÙŠ</option>
        <option value="hidden">Ù‚Ø¨Ùˆ Ù…Ø®ÙÙŠ</option>
      </select>
    </p>
    <p>ÙƒÙ…ÙŠØ© Ø§Ù„Ø´Ø­Ù†: <input type="number" id="ship-qty" min="1" max="1000" value="10" /></p>
    <button class="action-btn" onclick="startShipping()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø´Ø­Ù†</button>
    <div class="status-bar" id="shipping-status"></div>
  </div>
</div>

<div id="events" class="screen">
  <h2>Ø§Ù„Ø£Ø­Ø¯Ø§Ø« Ø§Ù„Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©</h2>
  <div id="events-log" class="log"></div>
  <button class="action-btn" onclick="triggerRandomEvent()">Ø¥Ø«Ø§Ø±Ø© Ø­Ø¯Ø« Ø¹Ø´ÙˆØ§Ø¦ÙŠ</button>
</div>

<div id="loans" class="screen">
  <h2>Ø§Ù„Ù‚Ø±ÙˆØ¶ ÙˆØ§Ù„ØªÙ…ÙˆÙŠÙ„</h2>
  <div id="loan-info" class="card"></div>
  <div class="card">
    <p>Ø¥Ø¹Ø·Ø§Ø¡ Ù‚Ø±Ø¶ (Ù…Ù‚ÙÙ„ Ø­ØªÙ‰ Ø§Ù„Ù…Ø±Ø­Ù„Ø© 2)</p>
    <p>Ø§Ù„Ù…Ø¨Ù„Øº: <input type="number" id="loan-amount" min="1000" max="50000" step="1000" disabled /></p>
    <p>Ù†Ø³Ø¨Ø© Ø§Ù„ÙØ§Ø¦Ø¯Ø© %: <input type="number" id="loan-interest" min="5" max="50" step="1" value="10" disabled /></p>
    <button class="action-btn disabled" id="give-loan-btn" disabled onclick="giveLoan()">Ø£Ø¹Ø· Ù‚Ø±Ø¶</button>
  </div>
</div>

<div id="achievements" class="screen">
  <h2>Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª ÙˆØ§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</h2>
  <div id="achievements-list"></div>
  <div id="daily-goals"></div>
</div>

<script>
  // Ø­Ø§Ù„Ø© Ø§Ù„Ù„Ø¹Ø¨Ø©
  let money = 10000; // Ù‚Ø±Ø¶ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ù…Ù† Ø§Ù„Ø¹ØµØ§Ø¨Ø©
  let loanAmount = 10000;
  let loanInterest = 15; // Ù†Ø³Ø¨Ø© Ø§Ù„ÙØ§Ø¦Ø¯Ø© Ø§Ù„Ù…Ø¦ÙˆÙŠØ© Ù„ÙƒÙ„ Ø¯ÙˆØ±Ø© ØªØ£Ø®ÙŠØ±
  let loanDueTurns = 10; // Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø¯ÙˆØ§Ø± Ù„Ø³Ø¯Ø§Ø¯ Ø§Ù„Ù‚Ø±Ø¶ Ù‚Ø¨Ù„ Ø§Ù„ØºØ±Ø§Ù…Ø©
  let currentTurn = 1;
  let debtUnpaidTurns = 0;
  let stage = 1;
  let reputation = {
    "Los Huesos": 82,
    "The Butcher": 40,
    "Police": -35,
    "Dark Web": 90
  };
  let suppliers = [
    { id: 'viper', name: 'Viper Luca', price: 500, temperament: 'aggressive', quality: 2, risk: 4 },
    { id: 'drhollow', name: 'Dr. Hollow', price: 300, temperament: 'chaotic', quality: 1, risk: 3 },
    { id: 'crimson', name: 'The Crimson Krew', price: 700, temperament: 'hostile', quality: 3, risk: 2 }
  ];
  let clients = [
    { id: 'butcher', name: 'The Butcher', demand: 100, paymentMethod: 'cash', temperament: 'brutal', loyalty: 50 },
    { id: 'corporacion', name: 'La CorporaciÃ³n', demand: 200, paymentMethod: 'monthly', temperament: 'loyal', loyalty: 80 }
  ];
  let policeActivity = [
    { message: "Ø§Ù„Ù…Ø³Ø§Ø± 9 ØªØ­Øª Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨Ø©ØŒ ØªØ¬Ù†Ø¨ Ø§Ù„Ù…Ø±ÙˆØ± Ù…Ù†Ù‡.", active: true, penaltyTurns: 3 },
    { message: "Ø§Ù„Ø¶Ø§Ø¨Ø· Ø¯ÙŠÙ„ØºØ§Ø¯Ùˆ ÙŠØ¹Ø±Ø¶ Ø±Ø´ÙˆØ© Ø¨Ù‚ÙŠÙ…Ø© 2000 Ø¯Ø±Ù‡Ù….", active: true }
  ];
  let shippingInProgress = false;
  let shippingTimer = 0;
  let shippingDuration = 0;
  let shippingDetails = null;
  let eventsLog = [];
  let achievements = [];
  let dailyGoals = [];
  
  // ØªÙ‡ÙŠØ¦Ø© ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
  function init() {
    updateMoneyDisplay();
    renderSuppliers();
    renderClients();
    renderPolice();
    renderReputation();
    renderLoanInfo();
    renderAchievements();
    renderDailyGoals();
  }
  function switchScreen(id) {
    document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
    document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
    document.getElementById(id).classList.add('active');
    event.target.classList.add('active');
  }
  function updateMoneyDisplay() {
    document.title = `ğŸ’° ${money} Ø¯Ø±Ù‡Ù… - Ø¥Ù…Ø¨Ø±Ø§Ø·ÙˆØ±ÙŠØ© Ø§Ù„Ù„ÙˆØ¬Ø³ØªÙŠÙƒ`;
  }
  // Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ±Ø¯ÙŠÙ†
  function renderSuppliers() {
    const container = document.getElementById('supplier-list');
    container.innerHTML = '';
    suppliers.forEach(s => {
      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `
        <h3>${s.name}</h3>
        <p>Ø§Ù„Ø³Ø¹Ø± Ù„Ù„ÙˆØ­Ø¯Ø©: $${s.price}</p>
        <p>Ø§Ù„Ø¬ÙˆØ¯Ø©: ${s.quality} | Ø§Ù„Ù…Ø®Ø§Ø·Ø±Ø©: ${s.risk}</p>
        <button class="action-btn" onclick="negotiateSupplier('${s.id}')">ØªÙØ§ÙˆØ¶</button>
      `;
      container.appendChild(card);
    });
  }
  // Ø§Ù„ØªÙØ§ÙˆØ¶ Ù…Ø¹ Ø§Ù„Ù…ÙˆØ±Ø¯ - Ù…Ù†Ø·Ù‚ Ù…Ø¨Ø³Ø·
  function negotiateSupplier(id) {
    const supplier = suppliers.find(s => s.id === id);
    if (!supplier) return alert("Ø§Ù„Ù…ÙˆØ±Ø¯ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯");
    let basePrice = supplier.price;
    let offerPrice = basePrice;
    let msg = `${supplier.name} ÙŠÙ‚ÙˆÙ„: `;
    switch (supplier.temperament) {
      case 'aggressive':
        offerPrice = Math.floor(basePrice * 1.2);
        msg += `"Ù„Ø§ Ø£Ù‚Ø¯Ù… Ø®ØµÙˆÙ…Ø§Øª Ø¨Ø³Ù‡ÙˆÙ„Ø©ØŒ Ù‡Ø°Ø§ Ø³Ø¹Ø± $${offerPrice}."`;
        break;
      case 'chaotic':
        offerPrice = Math.floor(basePrice * (Math.random() * 0.5 + 1));
        msg += `"Ø®Ù…Ù† Ø§Ù„Ø³Ø¹Ø±ØŒ Ø¹Ø±Ø¶ÙŠ Ù‡Ùˆ $${offerPrice}."`;
        break;
      case 'hostile':
        offerPrice = Math.floor(basePrice * 1.5);
        msg += `"Ø¥Ø°Ø§ ØªØ±ÙŠØ¯ Ø§Ù„Ø¨Ø¶Ø§Ø¹Ø©ØŒ ØªØ¯ÙØ¹ $${offerPrice} Ø£Ùˆ Ù„Ø§ Ø´ÙŠØ¡."`;
        break;
      default:
        msg += `"Ø§Ù„Ø³Ø¹Ø± Ù‡Ùˆ $${offerPrice}."`;
    }
    alert(msg);
  }
  // Ø¹Ø±Ø¶ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
  function renderClients() {
    const container = document.getElementById('client-list');
    container.innerHTML = '';
    clients.forEach(c => {
      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `
        <h3>${c.name}</h3>
        <p>Ø§Ù„Ø·Ù„Ø¨: ${c.demand} ÙˆØ­Ø¯Ø©</p>
        <p>Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹: ${c.paymentMethod}</p>
        <button class="action-btn" onclick="negotiateClient('${c.id}')">ØªÙØ§ÙˆØ¶</button>
      `;
      container.appendChild(card);
    });
  }
  // Ø§Ù„ØªÙØ§ÙˆØ¶ Ù…Ø¹ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ - Ù…Ù†Ø·Ù‚ Ù…Ø¨Ø³Ø·
  function negotiateClient(id) {
    const client = clients.find(c => c.id === id);
    if (!client) return alert("Ø§Ù„Ø¹Ù…ÙŠÙ„ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯");
    let msg = `${client.name} ÙŠÙ‚ÙˆÙ„: `;
    if (client.temperament === 'brutal') {
      msg += `"Ø§Ø¯ÙØ¹ Ù…Ù‚Ø¯Ù…Ù‹Ø§ Ø£Ùˆ Ø³Ø£Ø°Ù‡Ø¨ Ù„ØºÙŠØ±Ùƒ."`;
    } else if (client.temperament === 'loyal') {
      msg += `"Ø£Ù†Ø§ Ù…Ø³ØªØ¹Ø¯ Ù„Ø¹Ù„Ø§Ù‚Ø© Ø·ÙˆÙŠÙ„Ø© Ø§Ù„Ø£Ù…Ø¯ Ø¥Ø°Ø§ ÙƒÙ†Øª Ù…ÙˆØ«ÙˆÙ‚Ù‹Ø§."`;
    } else {
      msg += `"Ø¯Ø¹Ù†Ø§ Ù†ØªØ­Ø¯Ø« Ø¹Ù† Ø§Ù„Ø¹Ù…Ù„."`;
    }
    alert(msg);
  }
  // Ø¹Ø±Ø¶ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø±Ø·Ø©
  function renderPolice() {
    const container = document.getElementById('police-info');
    container.innerHTML = '';
    policeActivity.forEach(p => {
      if (p.active) {
        const div = document.createElement('div');
        div.className = 'card';
        div.textContent = p.message;
        container.appendChild(div);
      }
    });
  }
  // Ø¯ÙØ¹ Ø±Ø´ÙˆØ© Ù„Ù„Ø´Ø±Ø·Ø©
  function payBribe() {
    if (money >= 2000) {
      money -= 2000;
      policeActivity.forEach(p => p.active = false);
      addEventLog("Ø¯ÙØ¹Øª Ø±Ø´ÙˆØ©. Ø§Ù†Ø®ÙØ¶Øª Ù†Ø´Ø§Ø·Ø§Øª Ø§Ù„Ø´Ø±Ø·Ø©.");
      updateMoneyDisplay();
      renderPolice();
    } else {
      alert("Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ù…Ø§ ÙŠÙƒÙÙŠ Ù…Ù† Ø§Ù„Ù…Ø§Ù„ Ù„Ø¯ÙØ¹ Ø§Ù„Ø±Ø´ÙˆØ©!");
    }
  }
  // Ø¹Ø±Ø¶ Ø§Ù„Ø³Ù…Ø¹Ø©
  function renderReputation() {
    const container = document.getElementById('reputation-info');
    container.innerHTML = '';
    for (const key in reputation) {
      const div = document.createElement('div');
      div.className = 'card';
      div.innerHTML = `<strong>${key}</strong>: ${reputation[key]}/100`;
      container.appendChild(div);
    }
  }
  // Ø§Ù„Ø´Ø­Ù†
  function startShipping() {
    if (shippingInProgress) return alert("ÙŠÙˆØ¬Ø¯ Ø´Ø­Ù†Ø© Ø¬Ø§Ø±ÙŠØ© Ø¨Ø§Ù„ÙØ¹Ù„.");
    const route = document.getElementById('route-select').value;
    const vehicle = document.getElementById('vehicle-select').value;
    const storage = document.getElementById('storage-select').value;
    const qty = parseInt(document.getElementById('ship-qty').value);
    if (qty <= 0 || qty > 1000) return alert("ÙƒÙ…ÙŠØ© ØºÙŠØ± ØµØ§Ù„Ø­Ø©.");
    let cost = qty * 400; // ØªÙƒÙ„ÙØ© Ø§Ù„ÙˆØ­Ø¯Ø© ØªÙ‚Ø±ÙŠØ¨ÙŠ
    if (cost > money) return alert("Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø§Ù„ ÙƒØ§ÙÙ Ù„ØªØºØ·ÙŠØ© ØªÙƒÙ„ÙØ© Ø§Ù„Ø´Ø­Ù†.");
    money -= cost;
    updateMoneyDisplay();
    shippingInProgress = true;
    shippingDuration = route === 'safe' ? 15 : 8;
    shippingTimer = shippingDuration;
    shippingDetails = { route, vehicle, storage, qty };
    document.getElementById('shipping-status').textContent = `Ø¨Ø¯Ø£ Ø§Ù„Ø´Ø­Ù†: ${qty} ÙˆØ­Ø¯Ø© Ø¹Ø¨Ø± Ù…Ø³Ø§Ø± ${route} Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… ${vehicle}. Ø§Ù„ÙˆÙ‚Øª: ${shippingDuration} Ø¯ÙˆØ±Ø§Øª.`;
    addEventLog(`Ø¨Ø¯Ø£ Ø´Ø­Ù† ${qty} ÙˆØ­Ø¯Ø© Ø¹Ø¨Ø± Ù…Ø³Ø§Ø± ${route} Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… ${vehicle}.`);
    runTurn();
  }
  // Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£Ø¯ÙˆØ§Ø± ÙˆØ§Ù„Ø£Ø­Ø¯Ø§Ø«
  function runTurn() {
    if (shippingInProgress) {
      shippingTimer--;
      if (shippingTimer <= 0) {
        shippingInProgress = false;
        // Ø§Ø­ØªÙ…Ø§Ù„ Ø£Ù† ØªØ¹ØªØ±Ø¶ Ø§Ù„Ø´Ø±Ø·Ø© Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³Ø§Ø± Ù…Ø­ÙÙˆÙ Ø¨Ø§Ù„Ù…Ø®Ø§Ø·Ø±
        if (shippingDetails.route === 'risky' && Math.random() < 0.3) {
          addEventLog("ğŸš¨ ØªÙ… Ø§Ø¹ØªØ±Ø§Ø¶ Ø§Ù„Ø´Ø­Ù†Ø© Ù…Ù† Ù‚Ø¨Ù„ Ø§Ù„Ø´Ø±Ø·Ø©! Ø®Ø³Ø±Øª Ø§Ù„Ø¨Ø¶Ø§Ø¹Ø© ÙˆØ¯ÙÙØ¹Øª ØºØ±Ø§Ù…Ø©.");
          money -= 2000;
          reputation.Police -= 10;
          if (money < 0) money = 0;
        } else {
          addEventLog(`âœ… ÙˆØµÙ„Øª Ø§Ù„Ø´Ø­Ù†Ø© Ù…Ù† ${shippingDetails.qty} ÙˆØ­Ø¯Ø© Ø¨Ø£Ù…Ø§Ù†.`);
          money += shippingDetails.qty * 700; // Ø§Ù„Ø±Ø¨Ø­ ØªÙ‚Ø¯ÙŠØ±ÙŠ
        }
        updateMoneyDisplay();
        document.getElementById('shipping-status').textContent = "Ù„Ø§ ØªÙˆØ¬Ø¯ Ø´Ø­Ù†Ø§Øª Ù†Ø´Ø·Ø©.";
        checkLoanStatus();
      } else {
        document.getElementById('shipping-status').textContent = `Ø§Ù„Ø´Ø­Ù† Ø¬Ø§Ø±Ù... ØªØ¨Ù‚Ù‰ ${shippingTimer} Ø¯ÙˆØ±Ø§Øª.`;
      }
    }
    currentTurn++;
    updateLoanCountdown();
    updateDailyGoals();
    if (Math.random() < 0.1) triggerRandomEvent();
    setTimeout(runTurn, 3000);
  }
  // Ø³Ø¬Ù„ Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
  function addEventLog(text) {
    eventsLog.unshift(`[Ø§Ù„Ø¯ÙˆØ± ${currentTurn}] ${text}`);
    if (eventsLog.length > 50) eventsLog.pop();
    document.getElementById('events-log').textContent = eventsLog.join('\n');
  }
  // Ø£Ø­Ø¯Ø§Ø« Ø¹Ø´ÙˆØ§Ø¦ÙŠØ©
  function triggerRandomEvent() {
    const events = [
      () => { addEventLog("ğŸ”¥ Ø®ÙŠØ§Ù†Ø© Ø¯Ø§Ø®Ù„ÙŠØ©! Ø®Ø³Ø±Øª 500 Ø¯Ø±Ù‡Ù…."); money -= 500; if(money < 0) money=0; },
      () => { addEventLog("ğŸš¨ Ø§Ù„Ø´Ø±Ø·Ø© Ù†Ø´Ø±Øª Ù†Ù‚Ø§Ø· ØªÙØªÙŠØ´. ØªÙ… ØªÙ‚Ù„ÙŠÙ„ Ø³Ø±Ø¹Ø© Ø§Ù„Ø´Ø­Ù†."); },
      () => { addEventLog("ğŸ’€ ØªØ±Ø§Ø¬Ø¹ Ø¹Ù…ÙŠÙ„ ÙÙŠ Ø§Ù„Ù„Ø­Ø¸Ø© Ø§Ù„Ø£Ø®ÙŠØ±Ø©ØŒ Ø®Ø³Ø±Øª ØµÙÙ‚Ø©."); },
      () => { addEventLog("ğŸ§¨ ÙˆØ¬Ø¯Øª ÙØ±ØµØ© ØµÙÙ‚Ø© Ù…Ø±Ø¨Ø­Ø©! Ø±Ø¨Ø­ 2000 Ø¯Ø±Ù‡Ù…."); money += 2000; }
    ];
    const eventFn = events[Math.floor(Math.random()*events.length)];
    eventFn();
    updateMoneyDisplay();
  }
  // Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù‚Ø±Ø¶
  function renderLoanInfo() {
    const container = document.getElementById('loan-info');
    container.innerHTML = `
      <p><strong>Ø§Ù„Ù‚Ø±Ø¶ Ø§Ù„Ø­Ø§Ù„ÙŠ:</strong> ${loanAmount} Ø¯Ø±Ù‡Ù…</p>
      <p><strong>Ù†Ø³Ø¨Ø© Ø§Ù„ÙØ§Ø¦Ø¯Ø©:</strong> ${loanInterest}% Ù„ÙƒÙ„ Ø¯ÙˆØ±Ø© ØªØ£Ø®ÙŠØ±</p>
      <p><strong>Ø§Ù„Ø¯ÙˆØ±Ø§Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠØ© Ù„Ù„Ø³Ø¯Ø§Ø¯:</strong> ${loanDueTurns - debtUnpaidTurns}</p>
      <p><strong>Ø§Ù„Ù…Ø§Ù„ Ø§Ù„Ù…ØªÙˆÙØ±:</strong> ${money} Ø¯Ø±Ù‡Ù…</p>
    `;
    if (stage >= 2) {
      document.getElementById('loan-amount').disabled = false;
      document.getElementById('loan-interest').disabled = false;
      document.getElementById('give-loan-btn').disabled = false;
      document.getElementById('give-loan-btn').classList.remove('disabled');
    }
  }
  // ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø§Ø¯ Ø³Ø¯Ø§Ø¯ Ø§Ù„Ù‚Ø±Ø¶ ÙˆØ§Ù„Ø¹Ù‚ÙˆØ¨Ø§Øª
  function updateLoanCountdown() {
    if (money >= loanAmount && loanAmount > 0) {
      money -= loanAmount;
      loanAmount = 0;
      addEventLog("ğŸ’¸ ØªÙ… Ø³Ø¯Ø§Ø¯ Ø§Ù„Ù‚Ø±Ø¶ Ø¨Ù†Ø¬Ø§Ø­.");
      updateMoneyDisplay();
      renderLoanInfo();
      return;
    }
    if(loanAmount > 0){
      debtUnpaidTurns++;
      if (debtUnpaidTurns >= loanDueTurns) {
        loanInterest += 5;
        addEventLog(`ğŸ”¥ Ø²Ø§Ø¯Øª Ù†Ø³Ø¨Ø© Ø§Ù„ÙØ§Ø¦Ø¯Ø© Ø¥Ù„Ù‰ ${loanInterest}% Ø¨Ø³Ø¨Ø¨ Ø§Ù„ØªØ£Ø®ÙŠØ± ÙÙŠ Ø§Ù„Ø³Ø¯Ø§Ø¯!`);
        debtUnpaidTurns = 0;
      }
    }
  }
  // Ø¥Ø¹Ø·Ø§Ø¡ Ù‚Ø±Ø¶ Ù„Ù„Ø¢Ø®Ø±ÙŠÙ† (Ù…Ù‚ÙÙ„ ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©)
  function giveLoan() {
    const amount = parseInt(document.getElementById('loan-amount').value);
    const interest = parseInt(document.getElementById('loan-interest').value);
    if (isNaN(amount) || amount < 1000) return alert("Ø£Ø¯Ø®Ù„ Ù…Ø¨Ù„Øº Ù‚Ø±Ø¶ ØµØ§Ù„Ø­ >= 1000.");
    if (isNaN(interest) || interest < 5) return alert("ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ù†Ø³Ø¨Ø© Ø§Ù„ÙØ§Ø¦Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„ 5%.");
    if (money < amount) return alert("Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ù…Ø§ ÙŠÙƒÙÙŠ Ù…Ù† Ø§Ù„Ù…Ø§Ù„ Ù„Ø¥Ø¹Ø·Ø§Ø¡ Ù‚Ø±Ø¶.");
    money -= amount;
    addEventLog(`ğŸ’¼ Ø£Ø¹Ø·ÙŠØª Ù‚Ø±Ø¶Ù‹Ø§ Ø¨Ù‚ÙŠÙ…Ø© ${amount} Ø¯Ø±Ù‡Ù… Ø¨Ù†Ø³Ø¨Ø© ÙØ§Ø¦Ø¯Ø© ${interest}%.`);
    updateMoneyDisplay();
  }
  // Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²Ø§Øª
  function renderAchievements() {
    const container = document.getElementById('achievements-list');
    container.innerHTML = '';
    achievements.forEach(a => {
      const div = document.createElement('div');
      div.className = 'card';
      div.textContent = a;
      container.appendChild(div);
    });
  }
  // Ø¹Ø±Ø¶ Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„ÙŠÙˆÙ…ÙŠØ©
  function renderDailyGoals() {
    const container = document.getElementById('daily-goals');
    container.innerHTML = `<h3>Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„ÙŠÙˆÙ…ÙŠØ©</h3>`;
    dailyGoals.forEach(g => {
      const div = document.createElement('div');
      div.className = 'card';
      div.textContent = g;
      container.appendChild(div);
    });
  }
  // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ù‡Ø¯Ø§Ù Ø§Ù„ÙŠÙˆÙ…ÙŠØ©
  function updateDailyGoals() {
    if (!dailyGoals.includes("Ø¥ØªÙ…Ø§Ù… Ø´Ø­Ù†Ø©")) dailyGoals.push("Ø¥ØªÙ…Ø§Ù… Ø´Ø­Ù†Ø©");
    if (!dailyGoals.includes("Ø§Ù„ØªÙØ§ÙˆØ¶ Ø¹Ù„Ù‰ ØµÙÙ‚Ø©")) dailyGoals.push("Ø§Ù„ØªÙØ§ÙˆØ¶ Ø¹Ù„Ù‰ ØµÙÙ‚Ø©");
    renderDailyGoals();
  }
  // ØªØ­Ù‚Ù‚ Ø­Ø§Ù„Ø© Ø§Ù„Ù‚Ø±Ø¶ (Ù…Ø¤Ù‚Øª)
  function checkLoanStatus() {
    // Ù‡Ù†Ø§ ÙŠÙ…ÙƒÙ† Ø¥Ø¶Ø§ÙØ© Ù…Ù†Ø·Ù‚ Ù…ØªÙ‚Ø¯Ù…
  }
  // Ø¨Ø¯Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø©
  init();
</script>
</body>
</html>
